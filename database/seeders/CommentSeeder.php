<?php

namespace Database\Seeders;

use App\Modules\Articles\Persistence\ORM\Article;
use App\Modules\Comments\Persistence\ORM\Comment;
use App\Modules\Users\Persistence\ORM\User;
use Illuminate\Database\Seeder;

class CommentSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $users = User::all();
        $articles = Article::all();

        // Русские шаблоны комментариев
        $commentTemplates = [
            'Очень интересная статья! Спасибо за подробный анализ темы.',
            'Полностью согласен с автором. Это действительно важная проблема современности.',
            'Хотелось бы узнать больше о практических аспектах применения этих методов.',
            'Отличная работа! Особенно понравился раздел о перспективах развития.',
            'Интересный взгляд на проблему. Спасибо за новую информацию.',
            'Спасибо за статью! Очень полезно и познавательно.',
            'Хорошо структурированный материал. Легко читается и понимается.',
            'Интересные факты! Не знал об этом раньше.',
            'Спасибо за подробное объяснение сложной темы.',
            'Отличный материал! Рекомендую к прочтению всем.',
            'Очень актуальная тема. Спасибо за освещение проблемы.',
            'Интересный подход к решению вопроса. Спасибо!',
            'Полезная информация! Пригодится в работе.',
            'Хорошо написано! Легко понять даже новичку.',
            'Спасибо за качественный контент!',
            'Интересная точка зрения. Стоит задуматься.',
            'Отличная статья! Много полезной информации.',
            'Спасибо за подробный разбор темы.',
            'Очень познавательно! Узнал много нового.',
            'Хороший материал! Рекомендую всем.',
            'Интересные идеи! Спасибо за вдохновение.',
            'Полезная статья! Пригодится в жизни.',
            'Отличный анализ! Спасибо за работу.',
            'Интересно написано! Легко читается.',
            'Спасибо за качественный материал!',
            'Хорошая статья! Много интересных фактов.',
            'Полезно и познавательно! Спасибо.',
            'Отличный контент! Рекомендую к прочтению.',
            'Интересная тема! Спасибо за освещение.',
            'Хорошо изложено! Легко понять суть.',
            'Спасибо за полезную информацию!',
            'Отличная работа! Много нового узнал.',
            'Интересно и актуально! Спасибо.',
            'Хороший материал! Пригодится в учебе.',
            'Полезная статья! Спасибо за знания.',
            'Отличный анализ! Рекомендую всем.',
            'Интересные факты! Спасибо за информацию.',
            'Хорошо написано! Легко читается.',
            'Спасибо за качественный контент!',
            'Полезно и интересно! Рекомендую.',
            'Отличная статья! Много полезного.',
            'Интересная тема! Спасибо за разъяснения.',
            'Хороший материал! Пригодится в работе.',
            'Полезная информация! Спасибо за труд.',
            'Отличный контент! Рекомендую к изучению.',
            'Интересно и познавательно! Спасибо.',
            'Хорошо структурировано! Легко понять.',
            'Спасибо за полезную статью!',
            'Отличная работа! Много интересного.',
            'Интересные идеи! Спасибо за вдохновение.',
        ];

        foreach ($users as $user) {
            // Каждый пользователь оставляет 4 комментария под статьями других пользователей
            $userArticles = $articles->where('author_id', '!=', $user->id);
            $randomArticles = $userArticles->random(4);

            foreach ($randomArticles as $article) {
                $commentText = $commentTemplates[array_rand($commentTemplates)];

                // Иногда добавляем дополнительные предложения для разнообразия
                if (rand(1, 3) === 1) {
                    $additionalComments = [
                        ' Буду следить за обновлениями по этой теме.',
                        ' Очень жду продолжения!',
                        ' Интересно узнать ваше мнение по этому вопросу.',
                        ' Спасибо за ответы на мои вопросы.',
                        ' Продолжайте в том же духе!',
                        ' Очень полезно для саморазвития.',
                        ' Рекомендую всем друзьям.',
                        ' Отличная работа! Продолжайте!',
                    ];
                    $commentText .= $additionalComments[array_rand($additionalComments)];
                }

                Comment::create([
                    'article_id' => $article->id,
                    'author_id' => $user->id,
                    'text' => $commentText,
                ]);
            }
        }
    }
}
